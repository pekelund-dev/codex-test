{
  "consumer": {
    "name": "pklnd-web"
  },
  "provider": {
    "name": "receipt-processor"
  },
  "interactions": [
    {
      "description": "a Cloud Storage finalize event",
      "providerStates": [
        {
          "name": "receipt storage event is accepted"
        }
      ],
      "request": {
        "method": "POST",
        "path": "/events/storage",
        "headers": {
          "Content-Type": "application/json",
          "ce-specversion": "1.0",
          "ce-type": "google.cloud.storage.object.v1.finalized",
          "ce-source": "projects/_/buckets/receipts-bucket/objects/uploads/receipt-1.pdf",
          "ce-subject": "objects/uploads/receipt-1.pdf",
          "ce-id": "123e4567-e89b-12d3-a456-426614174000",
          "ce-time": "2024-01-01T00:00:00Z"
        },
        "body": {
          "bucket": "receipts-bucket",
          "name": "uploads/receipt-1.pdf",
          "metadata": {
            "receipt.owner.id": "user-123",
            "receipt.owner.displayName": "Anna Andersson",
            "receipt.owner.email": "anna@example.com"
          },
          "owner": {
            "id": "user-123",
            "displayName": "Anna Andersson",
            "email": "anna@example.com"
          }
        },
        "matchingRules": {
          "header": {
            "Content-Type": {
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            },
            "ce-id": {
              "matchers": [
                {
                  "match": "regex",
                  "regex": "[0-9a-fA-F-]{36}"
                }
              ]
            },
            "ce-time": {
              "matchers": [
                {
                  "match": "regex",
                  "regex": "\\\\d{4}-\\\\d{2}-\\\\d{2}T.*Z"
                }
              ]
            }
          },
          "body": {
            "$.bucket": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.name": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.metadata.receipt.owner.id": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.metadata.receipt.owner.displayName": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.metadata.receipt.owner.email": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.owner.id": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.owner.displayName": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.owner.email": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          }
        }
      },
      "response": {
        "status": 202
      }
    }
  ],
  "metadata": {
    "pactSpecification": {
      "version": "3.0.0"
    }
  }
}
